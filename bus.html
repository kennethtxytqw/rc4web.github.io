<!doctype html>
<!--[if lt IE 7]><html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7]><html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8]><html lang="en" class="no-js ie8"><![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->

<head>
    <meta charset="UTF-8">
    <title>Residential College 4 | Bus Arrivals</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="shortcut icon" href="favicon.png">

    <link rel="stylesheet" href="css/bootstrap.css">
    
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="js/rs-plugin/css/settings.css">

    <script type="text/javascript" src="js/modernizr.custom.32033.js"></script>
    
    <link rel="stylesheet" href="css/eco.css">
    <link rel="stylesheet" href="css/timeline.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
      
  </head>

  <body>

    <div class="pre-loader">
        <div class="load-con">
            <img src="img/eco/logo.png" class="animated fadeInDown" alt="">
            <div class="spinner">
              <div class="bounce1"></div>
              <div class="bounce2"></div>
              <div class="bounce3"></div>
          </div>
      </div>
  </div>
  
  <header>
    
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="fa fa-bars fa-lg"></span>
                </button>
                <a class="navbar-brand" href="index_.html">
                    <img src="img/eco/logo.png" alt="" class="logo">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                <ul class="nav navbar-nav navbar-right">
                    <li><a href="index_.html#about">about</a>
                    </li>
                    <li><a href="index_.html#houses">Houses</a>
                    </li>
                    <li><a href="index_.html#interest">Interest</a>
                    </li>
                    <li><a href="index_.html#photos">Media</a>
                    </li>
                    <li><a href="orcasays.html">Orca Says</a>
                    </li>
                    <li><a class="joinUs" href="http://rc4.nus.edu.sg" target="_blank">Offical Website</a>
                    </li>
                    <li><a href="index_.html#support">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-->
    </nav>

    <section id="joinUs">
        <div class="container-fluid">
            <div class="section-heading inverse scrollpoint sp-effect3">
                <p><br><br><br></p>
                <div class="row">
                    <p><b>RC4 Bus Arrvials</b> </p>

                </div>
            </div>
        </div>
    </section>
</header>


<div class="wrapper">

    

    <section id="houses">
        <div class="container">

            <div class="row">
                <br><br>
                
                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-4 bustable">
                    <b>Utown Internal Shuttle Bus Stop</b>
                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                              <tr>
                                <th>Bus</th>
                                <th>Next</th>
                                <th>After</th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: bus">
                            <tr>
                                <td data-bind="text: name"></td>
                                <td data-bind="text: arrivalTime"></td>
                                <td data-bind="text: nextArrivalTime"></td>
                            </tr>
                        </tbody>
                    </table>
                </div><!-- /.col -->
            <div class="col-md-4">
                    <div class="row">
                    <div class="col-md-12 bustable">
                    <b>RC4 Dover Road Bus Stop (Towards Clementi)</b>
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                          <tr>
                            <th>Bus</th>
                            <th>Next</th>
                            <th>After</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: lta_bus">
                        <tr>
                            <td data-bind="text: no"></td>
                            <td data-bind="text: next.time"></td>
                            <td data-bind="text: subsequent.time"></td>
                        </tr>
                    </tbody>
                </table>
                </div>
                </div>
                <div class="row">
                <div class="col-md-12 bustable">
                <b>Opp. RC4 Dover Road Bus Stop (Towards Buona Vista)</b>
                <table class="table table-bordered table-striped table-hover">
                        <thead>
                          <tr>
                            <th>Bus</th>
                            <th>Next</th>
                            <th>After</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: lta_opp_bus">
                        <tr>
                            <td data-bind="text: no"></td>
                            <td data-bind="text: next.time"></td>
                            <td data-bind="text: subsequent.time"></td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </div><!-- /.col -->
            <div class="col-md-2"></div>
        </div><!-- /.row -->
    </div>
</section>


<footer>
    <div class="container">
        <a href="#" class="scrollpoint sp-effect3">
            <img src="img/eco/logo.png" alt="" class="logo">
        </a>
        <div class="social">
            <a href="//facebook.com/NUSResidentialCollege4" target="_blank" class="scrollpoint sp-effect3"><i class="fa fa-facebook fa-lg"></i></a>
            <a href="//www.youtube.com/channel/UC1obh_c0WCdJyR1TvvUOSkw" class="scrollpoint sp-effect3"><i class="fa fa-youtube fa-lg"></i></a>
            <a href="//instagram.com/orcasnaps/" class="scrollpoint sp-effect3"><i class="fa fa-instagram fa-lg"></i></a>
        </div>
        <div class="rights">
            <p>Copyright &copy; 2015</p>
            <p>Residential College 4 Publicity Team</p>
        </div>
    </div>
</footer>

</div>

<template>
    <!-- timeline time label -->
    <li class="time-label scrollpoint sp-effect1">
      <span class="bg-teal date">
        10 Feb. 2014
    </span>
</li>
<!-- /.timeline-label -->
<!-- timeline item -->
<li>
  <i class="fa fa-file-text bg-teal scrollpoint sp-effect1"></i>
  <div class="timeline-item scrollpoint sp-effect2">
    <span class="time"><i class="fa fa-clock-o"></i> <i class="timeText">12:05</i></span>
    <h3 class="timeline-header">Title</h3>
    <div class="timeline-body">
      Text
  </div>
  <div class='timeline-footer'></div>
</div>
</li>
<!-- END timeline item -->
</template>

<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/placeholdem.min.js"></script>
<script src="js/rs-plugin/js/jquery.themepunch.plugins.min.js"></script>
<script src="js/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>
<script src="js/waypoints.min.js"></script>
<script src="js/scripts_basic.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script>

<script>
    $(document).ready(function() {
        appMaster.preLoader();
    });
</script>
<script type="text/javascript">
var isb = null;
var lta = null;
var lta_opp = null;

  $.ajax({
    url: 'http://query.yahooapis.com/v1/public/yql',
    data: {
        q: "select * from json where url ='https://myaces.nus.edu.sg/prjbus/services/shuttlebus/UTOWN'",
        format: "json"
    },
    dataType: "jsonp",
    success: function (data) {
        isb = data.query.results.json.shuttles;
        if(lta!=null && lta_opp!=null) {
            ko.applyBindings({
                bus: isb,
                lta_bus: lta,
                lta_opp_bus : lta_opp
            });
        }
        
    },
    error: function (result) {
        //alert("Sorry no data found.");
    }
});

  $.ajax({
    url: 'https://arrivelah.herokuapp.com/?id=19059',
    dataType: "json",
    success: function (data) {
        console.log(JSON.stringify(data));
        lta = data.services;
        for(var i=0; i<lta.length; i++)
        { 
            lta[i]["next"]["time"] = moment(lta[i]["next"]["time"]).fromNow(true);
            lta[i]["subsequent"]["time"] = moment(lta[i]["subsequent"]["time"]).fromNow(true);
        }
        if(isb!=null && lta_opp!=null) {
            ko.applyBindings({
                bus: isb,
                lta_bus: lta,
                lta_opp_bus : lta_opp
            });
        }
    },
    error: function (result) {
        //alert("Sorry no data found.");
    }
});

    $.ajax({
    url: 'https://arrivelah.herokuapp.com/?id=19051',
    dataType: "json",
    success: function (data) {
        console.log(JSON.stringify(data));
        lta_opp = data.services;
        for(var i=0; i<lta_opp.length; i++)
        { 
            lta_opp[i]["next"]["time"] = moment(lta_opp[i]["next"]["time"]).fromNow(true);
            lta_opp[i]["subsequent"]["time"] = moment(lta_opp[i]["subsequent"]["time"]).fromNow(true);
        }
        if(isb!=null && lta!=null) {
            ko.applyBindings({
                bus: isb,
                lta_bus: lta,
                lta_opp_bus : lta_opp
            });
        }
    },
    error: function (result) {
        //alert("Sorry no data found.");
    }
});

</script>


</body>

</html>